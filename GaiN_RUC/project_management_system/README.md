## 项目概览

本项目实现了“人大数智项目库”管理平台的端到端 DEMO，包括申报人、评审专家、平台管理员、服务专员四类角色以及公共入口（登录 / 密码重置 / 顶部导航）。系统围绕 _项目申报 → 初审 → 评审 → 答辩 → 公示入库 → 孵化服务 → 数据报表_ 的业务闭环搭建，所有功能均基于 Flask + SQLite 的轻量级技术栈，可以在本地 Windows 环境快速运行。

## 功能清单

- **公共界面**
  - 登录页：角色下拉、账号密码、验证码（输入 `1234` 即可）、注册与找回密码入口。
  - 密码找回：手机号 / 邮箱 + 验证码（输入 `000000`），重置密码。
  - 顶部导航：系统 Logo、角色名称、消息、帮助、退出。
- **申报人**
  - 工作台：我的项目、申报新项目、孵化服务入口、通知列表。
  - 项目流程：类型选择、分步表单、材料说明、草稿 / 提交、项目详情与列表筛选、状态跟踪。
  - 孵化服务：服务申请、材料说明、服务进度列表。
- **评审专家**
  - 工作台：待评审 / 待答辩 / 已完成卡片与通知。
  - 任务列表：任务筛选、确认接收 / 调换、进入评审。
  - 项目评审：四维度评分、意见录入、暂存与提交。
  - 答辩评审：答辩信息、提问记录、答辩评分。
  - 历史记录：时间、得分、意见摘要。
- **平台管理员**
  - 控制台：数据概览卡片 + 待办任务直达。
  - 材料初审：通过 / 驳回（填写理由）。
  - 专家分配：按项目选择专家多选框创建评审任务。
  - 公示管理：发布公示、正式入库。
  - 用户管理：新增账号、禁用、重置密码。
  - 数据报表：类别 / 状态统计（可导出浏览器 PDF / Excel）。
- **服务专员**
  - 工作台：待审核服务、执行中、已完成卡片 + 通知。
  - 服务审核：查看详情、资源查询（说明）、通过 / 驳回。
  - 方案制定：回顾需求、配置方案、提交执行。
  - 服务跟踪：进度更新、完成验收。
  - 资源管理：办公场地 / 算力 / 投融资资源的总量、使用量、空闲量调整。

所有界面均与需求文档中的“界面定位 / 核心元素 / 操作逻辑”保持一致，并给出了可操作的页面或表单。

## 技术栈

- **后端**：Flask 3、Flask-SQLAlchemy、Flask-Login、Flask-Migrate（可选）
- **数据库**：SQLite（默认保存于 `instance/project_management.db`）
- **前端**：Jinja2 模板 + 原生 CSS/JS

## 运行与配置

1. **创建虚拟环境并安装依赖**

   ```powershell
   cd project_management_system
   python -m venv .venv
   .\.venv\Scripts\activate
   pip install -r requirements.txt
   ```

2. **设置环境变量（可选）**

   ```powershell
   $env:FLASK_APP = "run.py"
   $env:FLASK_ENV = "development"   # 如需关闭调试删除该行
   ```

3. **初始化数据库**

   首次运行应用时会自动在 `instance/` 目录创建数据库和上传目录，并注入两套测试账号：

   | 角色     | 账号                | 密码        |
   |----------|---------------------|-------------|
   | 管理员   | `admin@gainruc.local`   | `Admin#123`  |
   | 服务专员 | `service@gainruc.local` | `Service#123`|

   申报人 / 专家可以通过注册页自助创建账号；管理员也可在“用户管理”中新增任意角色。
   管理员账号已经在项目里内置好了，首次运行时会自动写入 SQLite 数据库，信息如下：
账号（邮箱）：admin@gainruc.local
密码：Admin#123

4. **启动服务**

   ```powershell
   flask run
   # 或者
   python run.py
   ```

5. **访问系统**

   打开浏览器访问 `http://127.0.0.1:5000/`，使用上方账号登录；验证码 / 找回密码验证码分别输入 `1234` / `000000` 即可通过模拟校验。

## 目录结构

```
project_management_system/
├── run.py
├── requirements.txt
├── instance/                 # SQLite 数据库与上传目录（自动创建）
└── app/
    ├── __init__.py           # Flask 应用工厂 & 默认账号引导
    ├── config.py             # 配置（数据库、上传目录等）
    ├── models/               # SQLAlchemy 模型（用户、项目、评审、服务）
    ├── routes/               # 按角色划分的蓝图
    ├── templates/            # Jinja2 模板，含所有界面
    └── static/               # 全局样式与 JS
```

## 测试建议

- 以申报人身份创建项目，管理员初审 → 分配专家 → 专家评分 → 管理员公示 → 申报人申请孵化服务 → 服务专员审核 / 跟踪，完整走通 5 大业务流程。
- 管理员的“统计报表”会实时统计各项目类别 / 状态数量，可用于验证数据联动。

## 常见问题

| 问题 | 排查建议 |
|------|----------|
| 页面提示 403 | 当前登录角色无权限访问该蓝图，请切换到对应角色账号。 |
| 无法登录 | 确认验证码输入是否为 `1234`，账号状态是否被管理员禁用。 |
| 数据未刷新 | SQLite 单进程写入，确保未多开实例；刷新页面即可看到最新数据。 |

欢迎根据实际业务扩展字段、增加附件上传或对接真实短信 / 邮件服务。若需部署到服务器，只需把 `FLASK_ENV` 改为 `production` 并放置在 WSGI 容器即可。

